{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"/Users/divbhasin/rails-app/app/javascript/components/history/History.jsx\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport data from './data';\nimport { Layout, Card, Row, Col } from 'antd';\nimport ProfileView from './views/ProfileView';\nimport View2 from './views/View2';\nimport View3 from './views/View3';\nimport View4 from './views/View4';\nimport View5 from './views/View5';\nimport View6 from './views/View6';\nimport './history.css';\nimport 'antd/dist/antd.css';\nimport CanvasJSReact from './canvasjs.react.js';\nvar CanvasJS = CanvasJSReact.CanvasJS;\nvar CanvasJSChart = CanvasJSReact.CanvasJSChart;\nvar Sider = Layout.Sider,\n    Content = Layout.Content,\n    Footer = Layout.Footer;\nvar default_options = {\n  animationEnabled: true,\n  exportEnabled: true,\n  theme: \"light2\",\n  // \"light1\", \"dark1\", \"dark2\"\n  axisX: {\n    title: \"Day\",\n    interval: 1\n  }\n};\n\nvar calories_data_options = _objectSpread({}, default_options, {\n  axisY: {\n    title: \"Calories (kcal)\",\n    includeZero: false\n  },\n  title: {\n    text: \"Monthly Calories Analytics\"\n  },\n  data: [{\n    type: \"line\",\n    lineColor: \"red\",\n    toolTipContent: \"{y}\",\n    dataPoints: []\n  }]\n});\n\nvar carbs_data_options = _objectSpread({}, default_options, {\n  axisY: {\n    title: \"Carbohydrates (g)\",\n    includeZero: false\n  },\n  title: {\n    text: \"Monthly Carbohydrates Analytics\"\n  },\n  data: [{\n    type: \"line\",\n    lineColor: \"blue\",\n    toolTipContent: \"{y}\",\n    dataPoints: []\n  }]\n});\n\nvar protein_data_options = _objectSpread({}, default_options, {\n  axisY: {\n    title: \"Proteins (g)\",\n    includeZero: false\n  },\n  title: {\n    text: \"Monthly Protein Analytics\"\n  },\n  data: [{\n    type: \"line\",\n    lineColor: \"purple\",\n    toolTipContent: \"{y}\",\n    dataPoints: []\n  }]\n});\n\nvar fat_data_options = _objectSpread({}, default_options, {\n  axisY: {\n    title: \"Fats (g)\",\n    includeZero: false\n  },\n  title: {\n    text: \"Monthly Fat Analytics\"\n  },\n  data: [{\n    type: \"line\",\n    lineColor: \"orange\",\n    toolTipContent: \"{y}\",\n    dataPoints: []\n  }]\n});\n\nvar fibre_data_options = _objectSpread({}, default_options, {\n  axisY: {\n    title: \"Fibres (g)\",\n    includeZero: true\n  },\n  title: {\n    text: \"Monthly Fibre Analytics\"\n  },\n  data: [{\n    type: \"line\",\n    lineColor: \"green\",\n    toolTipContent: \"{y}\",\n    dataPoints: []\n  }]\n});\n\nvar History =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(History, _Component);\n\n  function History(props) {\n    var _this;\n\n    _classCallCheck(this, History);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(History).call(this, props));\n\n    _this.clean_data = function (data) {\n      var clean = data.map(function (o) {\n        return {\n          x: new Date(Date.parse(o.date)),\n          y: Number(o.count)\n        };\n      });\n      return clean;\n    };\n\n    _this.state = {\n      calories_results: [],\n      carbs_results: [],\n      protein_results: [],\n      fat_results: [],\n      fibre_results: [],\n      calories_data_options: calories_data_options,\n      carbs_data_options: carbs_data_options,\n      protein_data_options: protein_data_options,\n      fat_data_options: fat_data_options,\n      fibre_data_options: fibre_data_options\n    };\n    return _this;\n  }\n\n  _createClass(History, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        var self;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                self = this;\n                axios.get('/api/monthly_analytics', {\n                  withCredentials: true\n                }).then(function (_ref) {\n                  var data = _ref.data;\n\n                  _this2.setState({\n                    calories_results: data.calories_results,\n                    carbs_results: data.carbs_results,\n                    protein_results: data.protein_results,\n                    fat_results: data.fat_results,\n                    fibre_results: data.fibre_results\n                  });\n\n                  calories_data_options.data[0].dataPoints = self.clean_data(_this2.state.calories_results);\n                  carbs_data_options.data[0].dataPoints = self.clean_data(_this2.state.carbs_results);\n                  protein_data_options.data[0].dataPoints = self.clean_data(_this2.state.protein_results);\n                  fat_data_options.data[0].dataPoints = self.clean_data(_this2.state.fat_results);\n                  fibre_data_options.data[0].dataPoints = self.clean_data(_this2.state.fibre_results);\n                })[\"catch\"](function (error) {\n                  return console.log('api errors:', error);\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          checkedLogin = _this$props.checkedLogin,\n          isLoggedIn = _this$props.isLoggedIn,\n          user = _this$props.user;\n\n      if (!checkedLogin) {\n        return null;\n      } else if (!isLoggedIn) {\n        this.props.history.push('/');\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(Layout, {\n        style: {\n          height: 2100\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(Sider, {\n        width: 300,\n        style: {\n          backgroundColor: '#eee'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(Content, {\n        style: {\n          height: 220\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(ProfileView, {\n        user: user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }))), React.createElement(Layout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(Content, {\n        style: {\n          height: 300\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(CanvasJSChart, {\n        options: this.state.calories_data_options,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      })), React.createElement(Content, {\n        style: {\n          height: 300\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(CanvasJSChart, {\n        options: this.state.carbs_data_options,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      })), React.createElement(Content, {\n        style: {\n          height: 300\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(CanvasJSChart, {\n        options: this.state.protein_data_options,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      })), React.createElement(Content, {\n        style: {\n          height: 300\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(CanvasJSChart, {\n        options: this.state.fat_data_options,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      })), React.createElement(Content, {\n        style: {\n          height: 300\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(CanvasJSChart, {\n        options: this.state.fibre_data_options,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return History;\n}(Component);\n\nexport default History;","map":{"version":3,"sources":["/Users/divbhasin/rails-app/app/javascript/components/history/History.jsx"],"names":["React","Component","axios","data","Layout","Card","Row","Col","ProfileView","View2","View3","View4","View5","View6","CanvasJSReact","CanvasJS","CanvasJSChart","Sider","Content","Footer","default_options","animationEnabled","exportEnabled","theme","axisX","title","interval","calories_data_options","axisY","includeZero","text","type","lineColor","toolTipContent","dataPoints","carbs_data_options","protein_data_options","fat_data_options","fibre_data_options","History","props","clean_data","clean","map","o","x","Date","parse","date","y","Number","count","state","calories_results","carbs_results","protein_results","fat_results","fibre_results","self","get","withCredentials","then","setState","error","console","log","checkedLogin","isLoggedIn","user","history","push","height","backgroundColor"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport data from './data';\nimport { Layout, Card, Row, Col} from 'antd';\nimport ProfileView from './views/ProfileView';\nimport View2 from './views/View2';\nimport View3 from './views/View3';\nimport View4 from './views/View4';\nimport View5 from './views/View5';\nimport View6 from './views/View6';\nimport './history.css';\nimport 'antd/dist/antd.css';\n\nimport CanvasJSReact from './canvasjs.react.js';\nvar CanvasJS = CanvasJSReact.CanvasJS;\nvar CanvasJSChart = CanvasJSReact.CanvasJSChart;\n\nconst { Sider, Content, Footer } = Layout;\n\nconst default_options = {\n\tanimationEnabled: true,\n\texportEnabled: true,\n\ttheme: \"light2\", // \"light1\", \"dark1\", \"dark2\"\n\taxisX: {\n\t\ttitle: \"Day\",\n\t\tinterval: 1\n\t}\n}\n\nconst calories_data_options = {\n\t...default_options,\n\taxisY: {\n\t\ttitle: \"Calories (kcal)\",\n\t\tincludeZero: false\n\t},\n\ttitle:{\n    text: \"Monthly Calories Analytics\"\n\t},\n\tdata: [{\n\t\ttype: \"line\",\n    lineColor: \"red\",\n\t\ttoolTipContent: \"{y}\",\n\t\tdataPoints: []\n\t}]\n}\n\nconst carbs_data_options = {\n\t...default_options,\n\taxisY: {\n\t\ttitle: \"Carbohydrates (g)\",\n\t\tincludeZero: false\n\t},\n\ttitle:{\n\t\ttext: \"Monthly Carbohydrates Analytics\"\n\t},\n\tdata: [{\n\t\ttype: \"line\",\n    lineColor: \"blue\",\n\t\ttoolTipContent: \"{y}\",\n\t\tdataPoints: []\n\t}]\n} \n\nconst protein_data_options = {\n\t...default_options,\n\taxisY: {\n\t\ttitle: \"Proteins (g)\",\n\t\tincludeZero: false\n\t},\n\ttitle:{\n\t\ttext: \"Monthly Protein Analytics\"\n\t},\n\tdata: [{\n\t\ttype: \"line\",\n    lineColor: \"purple\",\n\t\ttoolTipContent: \"{y}\",\n\t\tdataPoints: []\n\t}]\n} \n\nconst fat_data_options = {\n\t...default_options,\n\taxisY: {\n\t\ttitle: \"Fats (g)\",\n\t\tincludeZero: false\n\t},\n\ttitle:{\n\t\ttext: \"Monthly Fat Analytics\"\n\t},\n\tdata: [{\n\t\ttype: \"line\",\n    lineColor: \"orange\",\n\t\ttoolTipContent: \"{y}\",\n\t\tdataPoints: []\n\t}]\n} \n\nconst fibre_data_options = {\n\t...default_options,\n\taxisY: {\n\t\ttitle: \"Fibres (g)\",\n\t\tincludeZero: true \n\t},\n\ttitle:{\n\t\ttext: \"Monthly Fibre Analytics\"\n\t},\n\tdata: [{\n\t\ttype: \"line\",\n    lineColor: \"green\",\n\t\ttoolTipContent: \"{y}\",\n\t\tdataPoints: []\n\t}]\n} \n\nclass History extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      calories_results: [],\n      carbs_results: [],\n      protein_results: [],\n      fat_results: [],\n      fibre_results: [],\n      calories_data_options: calories_data_options,\n      carbs_data_options: carbs_data_options,\n      protein_data_options: protein_data_options,\n      fat_data_options: fat_data_options,\n      fibre_data_options: fibre_data_options\n    };\n  };\n\n  clean_data = (data) => {\n    const clean = data.map(function(o) {\n      return {x: new Date(Date.parse(o.date)), y: Number(o.count)};\n    });\n    return clean;\n  }\n\n  async componentDidMount() {\n    var self = this;\n    axios.get('/api/monthly_analytics', { withCredentials: true })\n      .then(( { data }) => {\n        this.setState({\n          calories_results: data.calories_results,\n          carbs_results: data.carbs_results,\n          protein_results: data.protein_results,\n          fat_results: data.fat_results,\n          fibre_results: data.fibre_results\n        });\n        \n        calories_data_options.data[0].dataPoints = self.clean_data(this.state.calories_results); \n        carbs_data_options.data[0].dataPoints = self.clean_data(this.state.carbs_results); \n        protein_data_options.data[0].dataPoints = self.clean_data(this.state.protein_results); \n        fat_data_options.data[0].dataPoints = self.clean_data(this.state.fat_results); \n        fibre_data_options.data[0].dataPoints = self.clean_data(this.state.fibre_results); \n      })\n\n      .catch(error => console.log('api errors:', error))\n  };\n\n  render() {\n    const { checkedLogin, isLoggedIn, user } = this.props;\n\n    if (!checkedLogin) {\n      return null;\n    } else if (!isLoggedIn) {\n      this.props.history.push('/');\n    }\n\n    return (\n      <div>\n\t\t\t\t<Layout style={{ height: 2100 }}>\n\t\t\t\t\t<Sider width={300} style={{backgroundColor:'#eee'}}>\n\t\t\t\t\t\t<Content style={{ height: 220 }}>\n\t\t\t\t\t\t\t<ProfileView user={user}/>\n\t\t\t\t\t\t</Content>\n\t\t\t\t\t</Sider>\n\n\t\t\t\t\t<Layout>\n\t\t\t\t\t\t<Content style={{ height: 300 }}>\n\t\t\t\t\t\t\t<CanvasJSChart options={this.state.calories_data_options} />\n\t\t\t\t\t\t</Content>\n\n\t\t\t\t\t\t<Content style={{ height: 300  }}>\n\t\t\t\t\t\t\t<CanvasJSChart options={this.state.carbs_data_options} />\n\t\t\t\t\t\t</Content>\n\t\t\t\t\t\t<Content  style={{ height: 300  }}>\n\t\t\t\t\t\t\t<CanvasJSChart options={this.state.protein_data_options} />\n\t\t\t\t\t\t</Content>\n\n\t\t\t\t\t\t<Content style={{ height: 300  }}>\n\t\t\t\t\t\t\t<CanvasJSChart options={this.state.fat_data_options} />\n\t\t\t\t\t\t</Content>\n\n\t\t\t\t\t\t<Content style={{ height: 300  }}>\n\t\t\t\t\t\t\t<CanvasJSChart options={this.state.fibre_data_options} />\n\t\t\t\t\t\t</Content>\n\t\t\t\t\t</Layout>\n\n\t\t\t\t</Layout>\n      </div>\n      )\n  }\n}\n\nexport default History\n"]},"metadata":{},"sourceType":"module"}