{"ast":null,"code":"import * as d3 from 'd3';\nimport _ from 'lodash';\n\nvar draw = function draw(props) {\n  console.log(props);\n  var data = [];\n\n  if (props.data !== null) {\n    data = _.cloneDeep(props.data);\n  }\n\n  d3.select('.vis-linechart > *').remove();\n  var margin = {\n    top: 20,\n    right: 20,\n    bottom: 30,\n    left: 40\n  };\n  var width = props.width - margin.left - margin.right;\n  ;\n  var height = props.height - margin.top - margin.bottom;\n  var svg = d3.select(\".vis-linechart\").append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n  data.forEach(function (d) {\n    d.date = d3.timeParse(\"%Y-%m-%d\")(d.date);\n    d.count = +d.count;\n  }); // Add X axis --> it is a date format\n\n  var x = d3.scaleTime().domain(d3.extent(data, function (d) {\n    return d.date;\n  })).range([0, width]);\n  svg.append(\"g\").attr(\"transform\", \"translate(0,\" + height + \")\").call(d3.axisBottom(x)); // Add Y axis\n\n  var y = d3.scaleLinear().domain([0, d3.max(data, function (d) {\n    return +d.count;\n  })]).range([height, 0]);\n  svg.append(\"g\").call(d3.axisLeft(y)); // Add the line\n\n  svg.append(\"path\").datum(data).attr(\"fill\", \"none\").attr(\"stroke\", \"steelblue\").attr(\"stroke-width\", 1.5).attr(\"d\", d3.line().x(function (d) {\n    return x(d.date);\n  }).y(function (d) {\n    return y(d.count);\n  }));\n};\n\nexport default draw;","map":{"version":3,"sources":["/Users/divbhasin/rails-app/fitness/app/javascript/components/history/charts/LineChart/vis.js"],"names":["d3","_","draw","props","console","log","data","cloneDeep","select","remove","margin","top","right","bottom","left","width","height","svg","append","attr","forEach","d","date","timeParse","count","x","scaleTime","domain","extent","range","call","axisBottom","y","scaleLinear","max","axisLeft","datum","line"],"mappings":"AAAA,OAAO,KAAKA,EAAZ,MAAoB,IAApB;AACA,OAAOC,CAAP,MAAc,QAAd;;AAEA,IAAMC,IAAI,GAAG,SAAPA,IAAO,CAACC,KAAD,EAAW;AACpBC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,MAAIG,IAAI,GAAG,EAAX;;AACA,MAAIH,KAAK,CAACG,IAAN,KAAe,IAAnB,EAAyB;AACrBA,IAAAA,IAAI,GAAGL,CAAC,CAACM,SAAF,CAAYJ,KAAK,CAACG,IAAlB,CAAP;AACH;;AACDN,EAAAA,EAAE,CAACQ,MAAH,CAAU,oBAAV,EAAgCC,MAAhC;AACA,MAAIC,MAAM,GAAG;AAAEC,IAAAA,GAAG,EAAE,EAAP;AAAWC,IAAAA,KAAK,EAAE,EAAlB;AAAsBC,IAAAA,MAAM,EAAE,EAA9B;AAAkCC,IAAAA,IAAI,EAAE;AAAxC,GAAb;AACA,MAAMC,KAAK,GAAGZ,KAAK,CAACY,KAAN,GAAcL,MAAM,CAACI,IAArB,GAA4BJ,MAAM,CAACE,KAAjD;AAAuD;AACvD,MAAMI,MAAM,GAAGb,KAAK,CAACa,MAAN,GAAeN,MAAM,CAACC,GAAtB,GAA4BD,MAAM,CAACG,MAAlD;AACA,MAAII,GAAG,GAAGjB,EAAE,CAACQ,MAAH,CAAU,gBAAV,EACLU,MADK,CACE,KADF,EAELC,IAFK,CAEA,OAFA,EAESJ,KAAK,GAAGL,MAAM,CAACI,IAAf,GAAsBJ,MAAM,CAACE,KAFtC,EAGLO,IAHK,CAGA,QAHA,EAGUH,MAAM,GAAGN,MAAM,CAACC,GAAhB,GAAsBD,MAAM,CAACG,MAHvC,EAILK,MAJK,CAIE,GAJF,EAKLC,IALK,CAKA,WALA,EAMF,eAAeT,MAAM,CAACI,IAAtB,GAA6B,GAA7B,GAAmCJ,MAAM,CAACC,GAA1C,GAAgD,GAN9C,CAAV;AAQAL,EAAAA,IAAI,CAACc,OAAL,CAAa,UAAUC,CAAV,EAAa;AACtBA,IAAAA,CAAC,CAACC,IAAF,GAAStB,EAAE,CAACuB,SAAH,CAAa,UAAb,EAAyBF,CAAC,CAACC,IAA3B,CAAT;AACAD,IAAAA,CAAC,CAACG,KAAF,GAAU,CAACH,CAAC,CAACG,KAAb;AACH,GAHD,EAlBoB,CAuBpB;;AACA,MAAIC,CAAC,GAAGzB,EAAE,CAAC0B,SAAH,GACHC,MADG,CACI3B,EAAE,CAAC4B,MAAH,CAAUtB,IAAV,EAAgB,UAAUe,CAAV,EAAa;AAAE,WAAOA,CAAC,CAACC,IAAT;AAAgB,GAA/C,CADJ,EAEHO,KAFG,CAEG,CAAC,CAAD,EAAId,KAAJ,CAFH,CAAR;AAGAE,EAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EACKC,IADL,CACU,WADV,EACuB,iBAAiBH,MAAjB,GAA0B,GADjD,EAEKc,IAFL,CAEU9B,EAAE,CAAC+B,UAAH,CAAcN,CAAd,CAFV,EA3BoB,CA+BpB;;AACA,MAAIO,CAAC,GAAGhC,EAAE,CAACiC,WAAH,GACHN,MADG,CACI,CAAC,CAAD,EAAI3B,EAAE,CAACkC,GAAH,CAAO5B,IAAP,EAAa,UAAUe,CAAV,EAAa;AAAE,WAAO,CAACA,CAAC,CAACG,KAAV;AAAkB,GAA9C,CAAJ,CADJ,EAEHK,KAFG,CAEG,CAACb,MAAD,EAAS,CAAT,CAFH,CAAR;AAGAC,EAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EACKY,IADL,CACU9B,EAAE,CAACmC,QAAH,CAAYH,CAAZ,CADV,EAnCoB,CAsCpB;;AACAf,EAAAA,GAAG,CAACC,MAAJ,CAAW,MAAX,EACKkB,KADL,CACW9B,IADX,EAEKa,IAFL,CAEU,MAFV,EAEkB,MAFlB,EAGKA,IAHL,CAGU,QAHV,EAGoB,WAHpB,EAIKA,IAJL,CAIU,cAJV,EAI0B,GAJ1B,EAKKA,IALL,CAKU,GALV,EAKenB,EAAE,CAACqC,IAAH,GACNZ,CADM,CACJ,UAAUJ,CAAV,EAAa;AAAE,WAAOI,CAAC,CAACJ,CAAC,CAACC,IAAH,CAAR;AAAkB,GAD7B,EAENU,CAFM,CAEJ,UAAUX,CAAV,EAAa;AAAE,WAAOW,CAAC,CAACX,CAAC,CAACG,KAAH,CAAR;AAAmB,GAF9B,CALf;AASH,CAhDD;;AAkDA,eAAetB,IAAf","sourcesContent":["import * as d3 from 'd3';\nimport _ from 'lodash';\n\nconst draw = (props) => {\n    console.log(props);\n    let data = [];\n    if (props.data !== null) {\n        data = _.cloneDeep(props.data);\n    }\n    d3.select('.vis-linechart > *').remove();\n    let margin = { top: 20, right: 20, bottom: 30, left: 40 }\n    const width = props.width - margin.left - margin.right;;\n    const height = props.height - margin.top - margin.bottom;\n    let svg = d3.select(\".vis-linechart\")\n        .append(\"svg\")\n        .attr(\"width\", width + margin.left + margin.right)\n        .attr(\"height\", height + margin.top + margin.bottom)\n        .append(\"g\")\n        .attr(\"transform\",\n            \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    data.forEach(function (d) {\n        d.date = d3.timeParse(\"%Y-%m-%d\")(d.date);\n        d.count = +d.count;\n    });\n    \n    // Add X axis --> it is a date format\n    let x = d3.scaleTime()\n        .domain(d3.extent(data, function (d) { return d.date; }))\n        .range([0, width]);\n    svg.append(\"g\")\n        .attr(\"transform\", \"translate(0,\" + height + \")\")\n        .call(d3.axisBottom(x));\n\n    // Add Y axis\n    var y = d3.scaleLinear()\n        .domain([0, d3.max(data, function (d) { return +d.count; })])\n        .range([height, 0]);\n    svg.append(\"g\")\n        .call(d3.axisLeft(y));\n\n    // Add the line\n    svg.append(\"path\")\n        .datum(data)\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", \"steelblue\")\n        .attr(\"stroke-width\", 1.5)\n        .attr(\"d\", d3.line()\n            .x(function (d) { return x(d.date) })\n            .y(function (d) { return y(d.count) })\n        )\n}\n\nexport default draw;\n"]},"metadata":{},"sourceType":"module"}