{"ast":null,"code":"var _jsxFileName = \"/Users/divbhasin/rails-app/fitness/app/javascript/components/Signup.jsx\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport React from 'react';\nimport axios from 'axios';\nimport Credentials from './signup/Credentials';\nimport PersonalDetails from './signup/PersonalDetails';\nimport FitnessGoals from './signup/FitnessGoals';\nimport './Signup.css';\n\nvar Signup =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Signup, _React$Component);\n\n  function Signup(props) {\n    var _this;\n\n    _classCallCheck(this, Signup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Signup).call(this, props));\n\n    _this.nextStep = function () {\n      var step = _this.state.step;\n\n      _this.setState({\n        step: step + 1\n      });\n    };\n\n    _this.prevStep = function () {\n      var step = _this.state.step;\n\n      _this.setState({\n        step: step - 1\n      });\n    };\n\n    _this.state = {\n      step: 1,\n      first_name: '',\n      last_name: '',\n      email: '',\n      password: '',\n      confirm_password: '',\n      gender: '',\n      age: '',\n      weight: '',\n      height: '',\n      activity_level: '',\n      fitness_goal: '',\n      errors: {}\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_this));\n    _this.validateForm = _this.validateForm.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Signup, [{\n    key: \"validateForm\",\n    value: function validateForm(errors) {\n      var valid = true;\n      Object.values(errors).forEach( // if we have an error string set valid to false\n      function (val) {\n        return val.length > 0 && (valid = false);\n      });\n      return valid;\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      event.preventDefault();\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n      this.setState(_defineProperty({}, name, value));\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      var _this2 = this;\n\n      event.preventDefault();\n      this.setState({\n        errors: {}\n      });\n      var user = {\n        first_name: this.state.first_name,\n        last_name: this.state.last_name,\n        email: this.state.email.toLowerCase(),\n        password: this.state.password,\n        weight: this.state.weight,\n        height: this.state.height,\n        gender: this.state.gender,\n        age: this.state.age,\n        activity_level: this.state.activity_level,\n        fitness_goal: this.state.fitness_goal\n      };\n      axios.post('/api/users', {\n        user: user\n      }, {\n        withCredentials: true\n      }).then(function (_ref) {\n        var data = _ref.data;\n\n        if ('errors' in data) {\n          _this2.setState({\n            errors: data.errors\n          });\n        } else {\n          _this2.props.handleLogin(data);\n\n          _this2.props.history.push('/');\n        }\n      })[\"catch\"](function (errs) {\n        console.log(errs);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var step = this.state.step;\n      var _this$state = this.state,\n          first_name = _this$state.first_name,\n          last_name = _this$state.last_name,\n          email = _this$state.email,\n          password = _this$state.password,\n          confirm_password = _this$state.confirm_password,\n          gender = _this$state.gender,\n          age = _this$state.age,\n          height = _this$state.height,\n          weight = _this$state.weight,\n          activity_level = _this$state.activity_level,\n          fitness_goal = _this$state.fitness_goal,\n          errors = _this$state.errors;\n      var values = {\n        first_name: first_name,\n        last_name: last_name,\n        email: email,\n        password: password,\n        confirm_password: confirm_password,\n        gender: gender,\n        age: age,\n        height: height,\n        weight: weight,\n        activity_level: activity_level,\n        fitness_goal: fitness_goal,\n        errors: errors\n      };\n\n      switch (step) {\n        case 1:\n          return React.createElement(Credentials, {\n            nextStep: this.nextStep,\n            handleChange: this.handleChange,\n            validateForm: this.validateForm,\n            values: values,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 100\n            },\n            __self: this\n          });\n\n        case 2:\n          return React.createElement(PersonalDetails, {\n            nextStep: this.nextStep,\n            prevStep: this.prevStep,\n            handleChange: this.handleChange,\n            validateForm: this.validateForm,\n            values: values,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 106\n            },\n            __self: this\n          });\n\n        case 3:\n          return React.createElement(FitnessGoals, {\n            prevStep: this.prevStep,\n            handleChange: this.handleChange,\n            handleSubmit: this.handleSubmit,\n            validateForm: this.validateForm,\n            values: values,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 114\n            },\n            __self: this\n          });\n      }\n    }\n  }]);\n\n  return Signup;\n}(React.Component);\n\nexport default Signup;","map":{"version":3,"sources":["/Users/divbhasin/rails-app/fitness/app/javascript/components/Signup.jsx"],"names":["React","axios","Credentials","PersonalDetails","FitnessGoals","Signup","props","nextStep","step","state","setState","prevStep","first_name","last_name","email","password","confirm_password","gender","age","weight","height","activity_level","fitness_goal","errors","handleChange","bind","handleSubmit","validateForm","valid","Object","values","forEach","val","length","event","preventDefault","target","name","value","user","toLowerCase","post","withCredentials","then","data","handleLogin","history","push","errs","console","log","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,sBAAxB;AACA,OAAOC,eAAP,MAA4B,0BAA5B;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AACA,OAAO,cAAP;;IAEMC,M;;;;;AACJ,kBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,gFAAMA,KAAN;;AADiB,UAuBnBC,QAvBmB,GAuBR,YAAM;AAAA,UACPC,IADO,GACE,MAAKC,KADP,CACPD,IADO;;AAEf,YAAKE,QAAL,CAAc;AACZF,QAAAA,IAAI,EAAEA,IAAI,GAAG;AADD,OAAd;AAGD,KA5BkB;;AAAA,UA8BnBG,QA9BmB,GA8BR,YAAM;AAAA,UACPH,IADO,GACE,MAAKC,KADP,CACPD,IADO;;AAEf,YAAKE,QAAL,CAAc;AACZF,QAAAA,IAAI,EAAEA,IAAI,GAAG;AADD,OAAd;AAGD,KAnCkB;;AAEjB,UAAKC,KAAL,GAAa;AACXD,MAAAA,IAAI,EAAE,CADK;AAEXI,MAAAA,UAAU,EAAE,EAFD;AAGXC,MAAAA,SAAS,EAAE,EAHA;AAIXC,MAAAA,KAAK,EAAE,EAJI;AAKXC,MAAAA,QAAQ,EAAE,EALC;AAMXC,MAAAA,gBAAgB,EAAE,EANP;AAOXC,MAAAA,MAAM,EAAE,EAPG;AAQXC,MAAAA,GAAG,EAAE,EARM;AASXC,MAAAA,MAAM,EAAE,EATG;AAUXC,MAAAA,MAAM,EAAE,EAVG;AAWXC,MAAAA,cAAc,EAAE,EAXL;AAYXC,MAAAA,YAAY,EAAE,EAZH;AAaXC,MAAAA,MAAM,EAAE;AAbG,KAAb;AAgBA,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBC,IAAlB,+BAApB;AACA,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBD,IAAlB,+BAApB;AACA,UAAKE,YAAL,GAAoB,MAAKA,YAAL,CAAkBF,IAAlB,+BAApB;AApBiB;AAqBlB;;;;iCAgBYF,M,EAAQ;AACnB,UAAIK,KAAK,GAAG,IAAZ;AACAC,MAAAA,MAAM,CAACC,MAAP,CAAcP,MAAd,EAAsBQ,OAAtB,EACE;AACA,gBAACC,GAAD;AAAA,eAASA,GAAG,CAACC,MAAJ,GAAa,CAAb,KAAmBL,KAAK,GAAG,KAA3B,CAAT;AAAA,OAFF;AAIA,aAAOA,KAAP;AACD;;;iCAEYM,K,EAAO;AAClBA,MAAAA,KAAK,CAACC,cAAN;AADkB,0BAEMD,KAAK,CAACE,MAFZ;AAAA,UAEVC,IAFU,iBAEVA,IAFU;AAAA,UAEJC,KAFI,iBAEJA,KAFI;AAGlB,WAAK5B,QAAL,qBAAiB2B,IAAjB,EAAwBC,KAAxB;AACD;;;iCAEYJ,K,EAAO;AAAA;;AAClBA,MAAAA,KAAK,CAACC,cAAN;AAEA,WAAKzB,QAAL,CAAc;AACZa,QAAAA,MAAM,EAAE;AADI,OAAd;AAIA,UAAMgB,IAAI,GAAG;AACX3B,QAAAA,UAAU,EAAE,KAAKH,KAAL,CAAWG,UADZ;AAEXC,QAAAA,SAAS,EAAE,KAAKJ,KAAL,CAAWI,SAFX;AAGXC,QAAAA,KAAK,EAAE,KAAKL,KAAL,CAAWK,KAAX,CAAiB0B,WAAjB,EAHI;AAIXzB,QAAAA,QAAQ,EAAE,KAAKN,KAAL,CAAWM,QAJV;AAKXI,QAAAA,MAAM,EAAE,KAAKV,KAAL,CAAWU,MALR;AAMXC,QAAAA,MAAM,EAAE,KAAKX,KAAL,CAAWW,MANR;AAOXH,QAAAA,MAAM,EAAE,KAAKR,KAAL,CAAWQ,MAPR;AAQXC,QAAAA,GAAG,EAAE,KAAKT,KAAL,CAAWS,GARL;AASXG,QAAAA,cAAc,EAAE,KAAKZ,KAAL,CAAWY,cAThB;AAUXC,QAAAA,YAAY,EAAE,KAAKb,KAAL,CAAWa;AAVd,OAAb;AAaArB,MAAAA,KAAK,CAACwC,IAAN,CAAW,YAAX,EAAyB;AAAEF,QAAAA,IAAI,EAAJA;AAAF,OAAzB,EAAmC;AAAEG,QAAAA,eAAe,EAAE;AAAnB,OAAnC,EACGC,IADH,CACQ,gBAAc;AAAA,YAAXC,IAAW,QAAXA,IAAW;;AAClB,YAAI,YAAYA,IAAhB,EAAsB;AACpB,UAAA,MAAI,CAAClC,QAAL,CAAe;AAAEa,YAAAA,MAAM,EAAEqB,IAAI,CAACrB;AAAf,WAAf;AACD,SAFD,MAEO;AACL,UAAA,MAAI,CAACjB,KAAL,CAAWuC,WAAX,CAAuBD,IAAvB;;AACA,UAAA,MAAI,CAACtC,KAAL,CAAWwC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACD;AACF,OARH,WASS,UAAAC,IAAI,EAAI;AAAEC,QAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AAAmB,OATtC;AAUD;;;6BAEQ;AAAA,UACCxC,IADD,GACU,KAAKC,KADf,CACCD,IADD;AAAA,wBAEiI,KAAKC,KAFtI;AAAA,UAECG,UAFD,eAECA,UAFD;AAAA,UAEaC,SAFb,eAEaA,SAFb;AAAA,UAEwBC,KAFxB,eAEwBA,KAFxB;AAAA,UAE+BC,QAF/B,eAE+BA,QAF/B;AAAA,UAEyCC,gBAFzC,eAEyCA,gBAFzC;AAAA,UAE2DC,MAF3D,eAE2DA,MAF3D;AAAA,UAEmEC,GAFnE,eAEmEA,GAFnE;AAAA,UAEwEE,MAFxE,eAEwEA,MAFxE;AAAA,UAEgFD,MAFhF,eAEgFA,MAFhF;AAAA,UAEwFE,cAFxF,eAEwFA,cAFxF;AAAA,UAEwGC,YAFxG,eAEwGA,YAFxG;AAAA,UAEsHC,MAFtH,eAEsHA,MAFtH;AAGP,UAAMO,MAAM,GAAG;AAAElB,QAAAA,UAAU,EAAVA,UAAF;AAAcC,QAAAA,SAAS,EAATA,SAAd;AAAyBC,QAAAA,KAAK,EAALA,KAAzB;AAAgCC,QAAAA,QAAQ,EAARA,QAAhC;AAA0CC,QAAAA,gBAAgB,EAAhBA,gBAA1C;AAA4DC,QAAAA,MAAM,EAANA,MAA5D;AAAoEC,QAAAA,GAAG,EAAHA,GAApE;AAAyEE,QAAAA,MAAM,EAANA,MAAzE;AAAiFD,QAAAA,MAAM,EAANA,MAAjF;AAAyFE,QAAAA,cAAc,EAAdA,cAAzF;AAAyGC,QAAAA,YAAY,EAAZA,YAAzG;AAAuHC,QAAAA,MAAM,EAANA;AAAvH,OAAf;;AAEA,cAAQf,IAAR;AACE,aAAK,CAAL;AACE,iBAAO,oBAAC,WAAD;AACL,YAAA,QAAQ,EAAE,KAAKD,QADV;AAEL,YAAA,YAAY,EAAE,KAAKiB,YAFd;AAGL,YAAA,YAAY,EAAE,KAAKG,YAHd;AAIL,YAAA,MAAM,EAAEG,MAJH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;;AAKF,aAAK,CAAL;AACE,iBAAO,oBAAC,eAAD;AACL,YAAA,QAAQ,EAAE,KAAKvB,QADV;AAEL,YAAA,QAAQ,EAAE,KAAKI,QAFV;AAGL,YAAA,YAAY,EAAE,KAAKa,YAHd;AAIL,YAAA,YAAY,EAAE,KAAKG,YAJd;AAKL,YAAA,MAAM,EAAEG,MALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;;AAMF,aAAK,CAAL;AACE,iBACE,oBAAC,YAAD;AACA,YAAA,QAAQ,EAAE,KAAKnB,QADf;AAEA,YAAA,YAAY,EAAE,KAAKa,YAFnB;AAGA,YAAA,YAAY,EAAE,KAAKE,YAHnB;AAIA,YAAA,YAAY,EAAE,KAAKC,YAJnB;AAKA,YAAA,MAAM,EAAEG,MALR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAfJ;AAwBD;;;;EAlHkB9B,KAAK,CAACmD,S;;AAqH3B,eAAe9C,MAAf","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport Credentials from './signup/Credentials'\nimport PersonalDetails from './signup/PersonalDetails'\nimport FitnessGoals from './signup/FitnessGoals'\nimport './Signup.css';\n\nclass Signup extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      step: 1,\n      first_name: '',\n      last_name: '',\n      email: '',\n      password: '',\n      confirm_password: '',\n      gender: '',\n      age: '',\n      weight: '',\n      height: '',\n      activity_level: '',\n      fitness_goal: '',\n      errors: {}\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.validateForm = this.validateForm.bind(this);\n  }\n\n  nextStep = () => {\n    const { step } = this.state\n    this.setState({\n      step: step + 1\n    })\n  }\n\n  prevStep = () => {\n    const { step } = this.state\n    this.setState({\n      step: step - 1\n    })\n  }\n\n  validateForm(errors) {\n    let valid = true;\n    Object.values(errors).forEach(\n      // if we have an error string set valid to false\n      (val) => val.length > 0 && (valid = false)\n    );\n    return valid;\n  }\n\n  handleChange(event) {\n    event.preventDefault();\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n  \n    this.setState({\n      errors: {}\n    })\n\n    const user = {\n      first_name: this.state.first_name,\n      last_name: this.state.last_name,\n      email: this.state.email.toLowerCase(),\n      password: this.state.password,\n      weight: this.state.weight,\n      height: this.state.height,\n      gender: this.state.gender,\n      age: this.state.age,\n      activity_level: this.state.activity_level,\n      fitness_goal: this.state.fitness_goal\n    }\n\n    axios.post('/api/users', { user }, { withCredentials: true })\n      .then(({ data }) => {\n        if ('errors' in data) {\n          this.setState( { errors: data.errors } )\n        } else {\n          this.props.handleLogin(data)\n          this.props.history.push('/')\n        }\n      })\n      .catch(errs => { console.log(errs) })\n  }\n\n  render() {\n    const { step } = this.state;\n    const { first_name, last_name, email, password, confirm_password, gender, age, height, weight, activity_level, fitness_goal, errors } = this.state;\n    const values = { first_name, last_name, email, password, confirm_password, gender, age, height, weight, activity_level, fitness_goal, errors };\n\n    switch (step) {\n      case 1:\n        return <Credentials\n          nextStep={this.nextStep}\n          handleChange={this.handleChange}\n          validateForm={this.validateForm}\n          values={values} />\n      case 2:\n        return <PersonalDetails\n          nextStep={this.nextStep}\n          prevStep={this.prevStep}\n          handleChange={this.handleChange}\n          validateForm={this.validateForm}\n          values={values} />\n      case 3:\n        return (\n          <FitnessGoals\n          prevStep={this.prevStep}\n          handleChange={this.handleChange}\n          handleSubmit={this.handleSubmit}\n          validateForm={this.validateForm}\n          values={values} />\n        )\n    }\n  }\n}\n\nexport default Signup\n"]},"metadata":{},"sourceType":"module"}